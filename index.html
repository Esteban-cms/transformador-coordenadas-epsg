<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Transformador de Coordenadas - EPSG</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>

  <div class="app-container">

    <header>
      <h1>Transformador de Coordenadas EPSG</h1>
      <p>Herramienta web para convertir, copiar, visualizar y exportar coordenadas.</p>
    </header>

    <section class="card">
      <h2>â• Ingreso de coordenadas</h2>
      <div class="grid-4">
        <input id="xInput" placeholder="X / Longitud">
        <input id="yInput" placeholder="Y / Latitud">
        <button class="btn primary" onclick="agregarCoordenada()">Agregar</button>
        <input type="file" id="fileInput" accept=".csv,.txt,.xlsx" onchange="cargarArchivo(event)">
      </div>
      <small>Puede escribir manualmente o cargar un archivo Excel / CSV / TXT.</small>
    </section>

    <section class="card">
      <h2>ğŸ”„ TransformaciÃ³n EPSG</h2>
      <div class="grid-4">
        <div>
          <label>Origen</label>
          <select id="epsgOrigen"></select>
        </div>
        <div>
          <label>Destino</label>
          <select id="epsgDestino"></select>
        </div>
        <button class="btn success" onclick="transformar()">Transformar</button>
        <button class="btn danger" onclick="limpiarTodo()">Limpiar todo</button>
      </div>
    </section>

    <section class="card">
      <h2>ğŸ“‹ Acciones</h2>
      <div class="grid-5">
        <button class="btn" onclick="copiarTodo('origen')">Copiar origen</button>
        <button class="btn" onclick="copiarTodo('transformado')">Copiar transformado</button>
        <button class="btn" onclick="mostrarMapa('origen')">Mapa origen</button>
        <button class="btn" onclick="mostrarMapa('transformado')">Mapa transformado</button>
        <button class="btn primary" onclick="exportarGeoJSON()">Exportar SHP (GeoJSON)</button>
      </div>
    </section>

    <section class="card">
      <h2>ğŸ“‘ Tabla de coordenadas</h2>
      <table id="tabla">
        <thead>
          <tr>
            <th>#</th>
            <th>X</th>
            <th>Y</th>
            <th>X Transformado</th>
            <th>Y Transformado</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <small>Clic derecho sobre una fila para copiar o eliminar una coordenada.</small>
    </section>

    <section class="card">
      <h2>ğŸ—ºï¸ VisualizaciÃ³n en mapa</h2>
      <div id="map"></div>
    </section>

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.9.0/proj4.js"></script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
  <script src="app.js"></script>

</body>
</html>
