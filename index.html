<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Transformador de Coordenadas EPSG</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>

<div class="app-container">

  <header>
    <h1>Transformador de Coordenadas EPSG</h1>
    <p>Conversión profesional entre sistemas MAGNA y WGS84.</p>
  </header>

  <section class="card">
    <h3>Ingreso de coordenadas</h3>
    <div class="grid">
      <input id="xInput" placeholder="X / Longitud">
      <input id="yInput" placeholder="Y / Latitud">
      <button class="btn primary" onclick="agregarCoordenada()">Agregar</button>
      <input type="file" id="fileInput" accept=".csv,.txt,.xlsx" onchange="cargarArchivo(event)">
    </div>
  </section>

  <section class="card">
    <h3>Transformación EPSG</h3>
    <div class="grid">
      <select id="epsgOrigen"></select>
      <select id="epsgDestino"></select>
      <button class="btn success" onclick="transformar()">Transformar</button>
      <button class="btn danger" onclick="limpiarTodo()">Limpiar</button>
    </div>
  </section>

  <section class="card">
    <h3>Acciones</h3>
    <div class="grid">
      <button class="btn" onclick="copiarTodo('origen')">Copiar origen</button>
      <button class="btn" onclick="copiarTodo('transformado')">Copiar transformado</button>
      <button class="btn" onclick="mostrarMapa('origen')">Mapa origen</button>
      <button class="btn" onclick="mostrarMapa('transformado')">Mapa transformado</button>
      <button class="btn primary" onclick="exportarGeoJSON()">Exportar GeoJSON</button>
    </div>
  </section>

  <section class="card">
    <h3>Tabla de coordenadas</h3>
    <table id="tabla">
      <thead>
        <tr>
          <th>#</th>
          <th>X</th>
          <th>Y</th>
          <th>X Transformado</th>
          <th>Y Transformado</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <small>Clic derecho para copiar o eliminar. Clic izquierdo para seleccionar.</small>
  </section>

  <section class="card">
    <h3>Mapa</h3>
    <div id="map"></div>
  </section>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.9.0/proj4.js"></script>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
<script src="app.js"></script>

</body>
</html>
